:vsc: VS{nbsp}Code

# README

## This is the README for the “vscode-yseopml” project

This folder contains the {vsc}{nbsp}extension that runs a YML (Yseop Markup Language) language server.

The extension observes all “yml”{nbsp}documents (documents from all editors associated to the YML{nbsp}language –{nbsp}kao{nbsp}files, yclass{nbsp}files, etc.) and uses the server to provide validation and completion suggestions.

The code for the extension is in the `client`{nbsp}directory. It uses the `vscode-languageclient`{nbsp}node module to launch the language server.

The language server is located in the `server`{nbsp}directory.


## How to run locally

. Run `npm install` to initialize the extension and the server.
. Run `npm run compile` to compile the extension and the server.
. Open this folder in {vsc}. In the “Debug” viewlet, run “Launch Client” from drop-down to launch the extension and attach to the extension.
. Open `test.kao` which is in the `client/test` folder.
. To debug the server, use the “Attach to Server” launch config.
. Set breakpoints in the client or the server.


## How to generate antlr4 files

. If you did not already, install `ANTLR tool` as explained http://www.antlr.org/download.html[here] and https://github.com/antlr/antlr4/blob/master/doc/getting-started.md[here].
. Edit the `YmlToBdl.g4` grammar file.
. Run `npm run antlr4ts` to generate tokens, lexer and parser files.


## How to update Syntax Highlighting

In order to update the syntax highlighting, you must edit `yml.tmLanguage.json` according to the http://manual.macromates.com/en/language_grammars#language_grammars[TextMate Manual].

The format available in this manual is a little bit different than the one we are using (json). However it is easy to understand how to change it to fit our needs.


## Package the extension

Run the following command in your terminal:

```[bash]
npm run package
```

It should end with a line like:

```
Created: /PATH/TO/vscode-yseopml/client/vscode-yseopml-X.X.X.vsix
```

This `.vsix`{nbsp}file in the `client`{nbsp}directory is the packaged extension that can be provided to {vsc} to install the extension.


## Install the extension

### From the command line

```[bash]
code --install-extension EXTENSION_FILE.vsix
```


### Via the GUI

. Open the {vsc}{nbsp}command console with `Ctrl + Shift + P`.
. Type “vsix” to search for the command “Install Extension from VSIX”.
. Select the extension file and validate.
. Reload {vsc}.
. Open `client/test/test.kao` to check that the extension is working properly.
